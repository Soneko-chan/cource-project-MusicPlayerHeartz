# Техническое задание: Создание музыкального приложения

**Студент:** Бочкарев Степан Константинович
**Группа:** 2307В

---

## 1.Описание проекта

### 1.1 Название приложения "Музыкальный плеер"

### 1.2 Назначение
"Музыкальный плеер - приложение,предназначенное для воспроизведения музыкальных композиций..Программа позваоляет регистрировать слушателей,создавать плейлисты,загружать,прослушивать треки и просматрицать информацию о них,оплачивать подписку."

---

## 2. Функциональные требования
### 2.1 Основные функции плеера

#### Функция 1: Импорт новых аудиозаписей в медиатеку
- **Описание:** Выбор дериктории с треками. Пользователь нажимает кнопку "Выбрать дерикторию",открывается проводник и пользователь выбирает папку с треками,далее он нажимает выбрать и треки загружаются в базу данных.
- **Входные данные:** Путь, файлы
- **Результат:** Треки добавлены в базу данных.

#### Функция 2: Просмотр медиатеки
- **Описание:** Пользвоатель может просматривать полную медиатеку треков, которые есть в приложении.
- **Входные данные:** Треки
- **Результат:** открывается страница медиатеки.

#### Функция 3: Создание плейлиста
- **Описание:** Создание нового плейлиста.Пользователь нажимает создать плейлист и новый плейлист добавляется в список.Плейлист появляется на экране и далее в него можно добавлять треки.
- **Входные данные:** Навзание плейлиста
- **Результат:** Плейлист создан.

#### Функция 4: Редактирование плейлиста
- **Описание:** Изменение плейлиста.Пользователь выбирает "Редактировать плейлист" и может изменить название плейлиста,добавить треки.
- **Входные данные:** Название плейлиста,треки
- **Результат:** Изменённый плейлист

#### Функция 5: Прослушивание треков
**Описание:** Пользователь может прослушивать треки и переключать их(следующий,предыдущий),останавливать воспроизведение,а также изменять громоксть.
- **Входные данные:** Название трека,артист,длительность трека,volume,обложка
- **Результат:** Начинает играть трек.

## 3. Структура базы данных

### Таблица 1: Traks
**Описание:** Таблица с данными о треках.Самая главная таблица,которая будет использована почти везде.

**Поля:**
- 'TrackId' (int,PK) - ID Трека.
- 'ArtistId' (int,FK) - ID артиста.
- 'AlbumId' (int,FK) - ID альбома.
- 'DataCreated' (Data) - Дата создания трека.
- 'Title' (string) - Название трека.
- 'TrackDuration' (float) - Длительность трека
- 'CoverPath' (string) - Путь к изображению для обложки
- 'HearsCount' (int) - Количество прослушиваний

**Связи:**
- Связь один-ко-многим с таблицей Albums
- Связь один-к-одному с таблицей Artists
- Связь один-ко-многим с таблицей Playlists

### Таблица 2: Artists
**Описание:** Таблица с данными об артистах.

**Поля:**
- 'ArtistId' (int,PK) - ID артиста.
- 'Name' (string) - Имя артиста.

**Связи:**
- Связь один-ко-многим с таблицей Traks
- Связь один-ко-многим с таблицей Albums

### Таблица 3: Albums
**Описание:** Таблица с данными альбомов.

**Поля:**
- 'AlbumId' (int,PK) - ID альбома.
- 'ArtistId' (int,FK) - ID артиста.
- 'TrackId' (int,FK) - ID Трека.
- 'Name' (string) - Название альбома.

**Связи:**
- Связь один-к-одному с таблицей Artists
- Связь один-к-одному с таблицей Tracks

### Таблица 4: Playlists
**Описание:** Таблица с данными плейлистов.

**Поля:**
- 'PlaylistId' (int,PK) - ID плейлиста.
- 'TrackId' (int,FK) - ID Трека.
- 'Name' (string) - Название плейлиста.
- 'CoverPath' (string) - Путь к изображению.

**Связи:**
- Связь один-к-одному с таблицей Tracks

### Таблица 5: Users
**Описание:** Таблица с данными пользователя.

**Поля:**
- 'UserId' (int,PK) - ID пользователя.
- 'Login' (string) - Логин пользователя.
- 'Password' (string) - Пароль пользователя.
- 'Username' (string) - Имя пользователя.

**Связи:**
- Связь один-ко-многим с таблицей Payments

### Таблица 6: Payments
**Описание:** Таблица с данными об оплате.

**Поля:**
- 'PaymentId' (int,PK) - ID платежа.
- 'UserId' (int,FK) - ID пользователя
- 'CardNumber' (NVARCHAR(20)) - номер карты
- 'ExpiryCardDate' (NVARCHAR(7)) - дата прекращения работы карты
- 'CVV' (NVARCHAR(4)) - верификационный код карты
- 'PaymentAmount' (DECIMAL(10,2)) - сумма платежа
- 'PaymentDate' (DateTime) - Дата платежа

**Саязи:**
- Связь один-к-одному с таблицей Users

## 4. Основные формы приложения

#### Форма 1: MainWindow (Главная форма приложения)

**Назначение:** Главная форма музыкального плеера.На этой форме можно управлять воспроизведением треков(запустить,выбрать другой,изменить громкость и тд.) и пеереходить к другим элементам приложения.

**Элементы управления:** 
- ListView "ControlsListView" - Боковая панель с кнопками для переключения между страницами
- TextBlock "TrackTitleTextBlock" - Поле с названием трека,который играет в данный момент
- Frame "MainFrame"- Контейнер для страниц навигации
- Slider "VolumeSlider" - Ползунок для управления громкостью
- Slider "TrackDurationSlider" - Ползунок для управления длительностью трека

**Действия:**
- Кнопка "Регулировка громоксти" - при нажатии на кнопку появляется ползунок, который можно перемещавть вверх или вниз для извенения громоксти
- Кнопка "Следующий трек" - заканчивает проигрывание текущего трека и зарускает следующий трек в базе данных
- Кнопка "Предыдущий трек" - заканчивает проигрываение текущего трека и запускает предыдущий трек из базы данных
- Кнопка "Повтор" - включает повтор текущего трека пока повтор не будет выключен
- Кнопка "Главная" переход к главной странице приложения,если главная страница уже открыта ничего не меняется
- Кнопка "Плейлисты" - переход к странцие с плейлистами, где можно создавать и изменять плейлисты,а также добавлять в них треки.
- Кнопка "Библиотека" - переход к библиотеке со всеми треками в базе данных,также сюда можно добавлять свои треки
- Кнопка "Настройки" - переход к странице с настройками для изменения темы приложения,выбора директории и просмотра информации о приложении
- Кнопка "Подписка" - переход к окну оплаты подписки, где нужно ввести данные карты для оплаты и оплатить подписку.

#### Форма 2: MainPlaylistsPage

**Назначение:** Страница с плейлистами плеера.На данной форме можно создавать плейлисты,изменять их внешний вид и добавлять различные треки,а также прослушивать треки.

**Элементы управления:**
- TextBlock "PlaylistsPageTitle" - Поле с названием страницы.
- ListBox "PlaylistsListBox" - список со всеми плейлистами,который можно дополнять создавая новые плейлисты

**Действия:**
- Кнопка "Новый плейлист" - создаёт новый плейлист и открывает его страницу
- Кнопка "Перейти к плейлисту" - откроется страница выбранного плейлиста для изменения внешнего вида,добавления треков и прослушивания плейлиста.

#### Форма 3: PlaylistPage

**Назначение:** Страница плейлиста для изменения плейлиста,добавления и прослшуивания треков из плейлиста.

**Элементы управления:**
- TextBlock "PlaylistTitle" - поле с названием плейлиста
- ListBox "TracksListbox" - список с треками

**Действия:**
- Кнопка "Добавить трек" - открывает страницу со всеми треками и выбранный трек добавляет в плейлист

#### Форма 4: MediatekaPage

**Назначение:** Страница со всеми треками в базе данных приложения,предназначенная для просмотра их просмотра и прослушивания.

**Элементы управления:**
- TextBlock "MediatekaTitle" - Поле с названием "Медиатека".
- ListBox "MediatekaListBox" - список со всеми треками в базе данных приложения

**Действия:**
- При нажатии на трек он начинает проигрываться

#### Форма 5: SettingsPage

**Назначение:** Страница с настройками приложения,где можно добавить директорию со своими треками и изменить внешний вид приложения.

**Элементы управления:**
- TextBlock "SettingsTitle" - Поле с названием "Настрйоки".
- TextBlock "FileDirectory" - Поле с путём к директории треков
- ComboBox "Theme" - Список с темами доступными в приложении и которые можно выбрать при нажатии на них

**Действия:**
- Кнопка "Выбрать директорию" - открывается файловый менеджер и м ожно выбрать путь к папке с треками

#### Форма 6: PayWindow

**Назначение:** Форма для выбора тарифа и оплаты подписки.

**Элементы управления:**
- TextBox "CardNumberTextBox" - Поле для ввода номера карты пользователя
- TextBox "ExpiryCardDateTextBox" - Поле для ввода даты с карточки
- TextBox "CVVTextBox" - Поле для ввода специального коды карточки
-

**Действия:**
- Кнопка "Оплатить подписку" - введённые данные проверяются и если нет ошибок, то выводится сообщение, что оплата прошла успешно и окно с оплатой закрывается.
- Кнопка "Отмена" - отменяет покупку и закрывает окно платежа.

## 5.Схема переходов между формами

### Схема навигации

#### Запуск приложения
**Запуск** → 'MainWindow'

#### Из MainWindow
**Навигация через боковую панель:**
     - Кнопка "Главная" → MainPage в MainFrame (если не открыта)
     - Кнопка "Плейлисты" → MainPlaylistsPage в MainFrame
     - Кнопка "Библиотека" → MediatekaPage в MainFrame
     - Кнопка "Настройки" → SettingsPage в MainFrame
     - Кнопка "Подписка" → PayWindow в MainFrame

**Управление воспроизведением:**
     - Кнопка "Регулировка громкости" → отображение/скрытие VolumeSlider
     - Кнопка "Следующий трек" → переход к следующему треку в базе данных
     - Кнопка "Предыдущий трек" → переход к предыдущему треку в базе данных
     - Кнопка "Повтор" → включение/выключение повтора текущего трека
     - Slider "VolumeSlider" → изменение громкости воспроизведения
     - Slider "TrackDurationSlider" → перемотка текущего трека

#### Из MediatekaPage
    - Выбор трека в MediatekaListBox → начало воспроизведения выбранного трека
    
#### Из MainPlaylistsPage
    - Кнопка "Новый плейлист" → создание плейлиста → открытие PlaylistPage для нового плейлиста
    - Кнопка "Перейти к плейлисту" (выбран плейлист в PlaylistsListBox) → PlaylistPage для выбранного плейлиста

#### Из PlaylistPage
    - Кнопка "Добавить трек" → открытие MediatekaPage в режиме выбора → выбор трека → добавление в плейлист → возврат на PlaylistPage
    - Выбор трека в TracksListbox → начало воспроизведения выбранного трека

#### Из SettingsPage
    - Кнопка "Выбрать директорию" → открытие файлового менеджера → выбор папки → обновление FileDirectory
    - Выбор темы в Theme ComboBox → немедленное применение выбранной темы оформления

#### Из PayWindow
    - Проверка данных карты → Успех → сообщение об успешной оплате → закрытие PayWindow → возврат на предыдущую страницу
    - Ошибка → сообщение об ошибке → остаёмся на PayWindow
    - Кнопка "Отмена" → закрытие PayWindow без оплаты → возврат на предыдущую страницу
